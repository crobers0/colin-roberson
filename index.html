<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<head>
  <title>Colin Roberson</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="container">
    <div class="computer">
      <div class="screen">
        <div class="dialogue">
          <div id="typewriter"></div>
            <script>
              document.getElementById("typewriter").textContent = "hello";
            </script>
        </div>
      </div>
      <div class="panel">
        <div class="button_b">

        </div>
        <div class="button_a">

        </div>
        <div class="button_c">

        </div>
        <div class="button_d">

        </div>
        <div class="avatar_frame">

        </div>
      </div>
      <div class="home_panel">
        <div class="home_button">

        </div>
      </div>
      <div class="light_panel">
        <div class="light">
          <div class="on_light">

          </div>
        </div>
        <div class="turn_on">
          <div class="on_button">

          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    // aboutButton
    var aboutButton = document.getElementById("about-button");
    aboutButton.addEventListener('click', function() {
      change_speech("Bakalicious");
      load_page("pages/about.html")
    });
    // projectsButton
    var projectsButton = document.getElementById("projects-button");
    projectsButton.addEventListener('click', function() {
      //
    })
    // experienceButton
    var experienceButton = document.getElementById("experience-button");
    experienceButton.addEventListener('click', function() {
      //
    })
    // socialsButton
    var socialsButton = document.getElementById("socials-button");
    socialsButton.addEventListener('click', function() {
      //
    })
    // update speech typewriter
    // MUST escape / script tag, even if its in quotes or anything similar, by \ + / script
    function change_speech(text) {
      let speech_var = document.getElementById("speech");
      speech_var.innerHTML = `<div id="typewriter"></div>
        <script>document.getElementById("typewriter").textContent = "${text}";<\/script>`;
      nodeScriptReplace(speech_var);
    }
    // switch html div
    /*
    function load_html(id_name, html_path) {
      document.getElementById(id_name).innerHTML = `<object type="text/html" data="${html_path}" ></object>`;
    }
    */
    // switch html page
    /*
    function load_page(html_path) {
      window.location.href = html_path;
    }
    */
    // recursively replace all scripts with executable ones ()
    function nodeScriptReplace(node) {
        if ( nodeScriptIs(node) === true ) {
                node.parentNode.replaceChild( nodeScriptClone(node) , node );
        }
        else {
                var i = -1, children = node.childNodes;
                while ( ++i < children.length ) {
                      nodeScriptReplace( children[i] );
                }
        }

        return node;
    }
    function nodeScriptClone(node){
            var script  = document.createElement("script");
            script.text = node.innerHTML;

            var i = -1, attrs = node.attributes, attr;
            while ( ++i < attrs.length ) {                                    
                  script.setAttribute( (attr = attrs[i]).name, attr.value );
            }
            return script;
    }
    function nodeScriptIs(node) {
            return node.tagName === 'SCRIPT';
    }
    // end recursive script replacement
  </script>
</body>
</html>